#!/bin/sh
# Pre-commit hook wrapper: run grumphp inside container if available, else run vendor/bin/grumphp
if command -v docker >/dev/null 2>&1; then
  if docker ps -a --format '{{.Names}}' | grep -q php-quality-tools; then
    docker exec -it php-quality-tools bash -lc "cd /project || cd /app; vendor/bin/grumphp run"
    exit $?
  fi
fi
# Fallback to local vendor
if [ -f vendor/bin/grumphp ]; then
  vendor/bin/grumphp run
  exit $?
fi
echo "grumphp not found. Please run composer install or start the php-quality-tools container."
exit 0
